generator client {
  provider = "prisma-client-js"
  output   = "../generated/nurses-client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Status {
  pending
  inProgress
  completed
  cancelled
  cancelledByPatient
  cancelledByProviders
  autoCancelled
}

model HomeServices {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  description String
  price       Float
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  visites     Visites[]
}

model Visites {
  id            Int          @id @default(autoincrement())
  serviceTypeId Int
  patientId     Int
  latitude      Float
  longitude     Float
  address       String
  description   String
  patient       Json
  providers     Json[]
  date          DateTime
  hour          String
  serviceType   HomeServices @relation(fields: [serviceTypeId], references: [id])
  status        Status       @default(pending)
  providersId   Int[]        @default([])
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
}

// for the service
model Counts {
  id                   Int @id @default(autoincrement())
  completed            Int @default(0)
  pending              Int @default(0)
  inProgress           Int @default(0)
  cancelled            Int @default(0)
  cancelledByPatient   Int @default(0)
  cancelledByProviders Int @default(0)
}
